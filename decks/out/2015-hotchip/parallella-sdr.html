<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=792">
<meta http-equiv="x-ua-compatible" content="ie=edge">


<!-- html generated by pub-server from markdown /2015_hotchip/parallella_sdr.md -->

<title>HotChips2015 SDR Tutorial</title>
<link rel="stylesheet" href="../shower/ribbon/styles/screen.css">
<link rel="stylesheet" href="../css/pub-theme-shower-ribbon.css">
<link rel="stylesheet" href="../css/highlight-github-0.2.3.css">
<link rel="stylesheet" href="../css/extra.css">
</head>
<body class="list">
<div data-render-layout="main-layout"><div class="2015-hotchip-parallella-sdr" dir="auto">

<nav id="nav">
<ul><li>=
<ul>
<li><a href="../2015-darpa/darpa-openness">DARPA: Wait, what?</a></li>
<li><a href="../2015-hotchip/parallella-sdr">HotChips2015 SDR Tutorial</a></li>
<li><a href="../2015-hpec/hpec2015">HPEC 2015</a></li>
<li><a href="../2015-oshwa/oshwa-chip">Open Source Chip Design</a></li>
<li><a href="../out/shower/license">License</a></li>
<li><a href="../out/shower/ribbon/license">License</a></li>
</ul>
</li></ul>
</nav>

<div data-render-page="default"><header class="caption">

</header>

<section id="title" class="slide background-image"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#title"><h2 id="implementing-software-defined-radio-on-the-parallella">Implementing Software Defined Radio on the Parallella</h2>
<p>by Andreas Olofsson (HOTCHIPS-2015)</p>
</div>
<img src="../images/parallella_front_slant.png" alt="" full="1">
</div></section>

<section id="sdr" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#sdr"><h2 id="what-is-software-defined-radio-sdr-">What is Software Defined Radio? (SDR)</h2>
<blockquote>
<p>&quot;Radio in which some or all of the physical layer functions are software defined&quot; --Wireless Innovation Forum</p>
</blockquote>
</div>

</div></section>

<section id="em" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#em"><h2 id="not-just-radio-">Not just &quot;radio&quot;!</h2>
<p><img src="../images/em_waves.gif" alt="" width="800"></p>
</div>

</div></section>

<section id="sdr-arch" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#sdr-arch"><h2 id="canonical-sdr-architecture">Canonical SDR architecture</h2>
<p><img src="../images/sdr.png" alt="" width="800"></p>
</div>

</div></section>

<section id="cool" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#cool"><h2 id="why-sdr-is-so-cool-hot-">Why SDR is so cool (&amp;hot)!!</h2>
<table>
<thead>
<tr>
<th></th>
<th style="text-align:center">HW</th>
<th style="text-align:center">SDR           </th>
</tr>
</thead>
<tbody>
<tr>
<td>Compilation</td>
<td style="text-align:center">Months</td>
<td style="text-align:center">Minutes      </td>
</tr>
<tr>
<td>Cost</td>
<td style="text-align:center">$50K</td>
<td style="text-align:center">$500    </td>
</tr>
<tr>
<td>Hurdle</td>
<td style="text-align:center">RF, HW, SW</td>
<td style="text-align:center">SW</td>
</tr>
<tr>
<td>Real time configurable</td>
<td style="text-align:center">No</td>
<td style="text-align:center">Yes</td>
</tr>
<tr>
<td>Future proof</td>
<td style="text-align:center">No</td>
<td style="text-align:center">yes</td>
</tr>
</tbody>
</table>
</div>

</div></section>

<section id="spectrum" class="slide background-image"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#spectrum"><h2 id="sdr-opportunities">SDR Opportunities</h2>
<p>(limited resource if there ever was one) </p>
</div>
<img src="../images/spectrum.jpg" alt="" full="1">
</div></section>

<section id="sdr-appliations" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#sdr-appliations"><h2 id="sdr-application-examples">SDR Application Examples</h2>
<p><img src="../images/satnogs.jpg" alt="" align="right" width="500"></p>
<ul>
<li>Amateur radio (HAM, etc)  </li>
<li>Radio astronomy  </li>
<li>Legacy modem emulation </li>
<li>Wireless comms (GSM, LTE)  </li>
<li>Wireless research (5G)  </li>
<li>Spectrum analysis    </li>
<li>Teaching DSP     </li>
<li>Nasty stuff...  </li>
</ul>
</div>

</div></section>

<section id="sdr-challenges" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#sdr-challenges"><h2 id="sdr-challenges">SDR Challenges</h2>
<p><img src="../images/rtl-sdr.jpg" alt="" align="right" width="400"></p>
<ul>
<li>Latency (microsecond)</li>
<li>Throughput (gigabits) </li>
<li>Size, Weight, Power (SWAP)</li>
<li>Cost ($20--&gt;$30,000) </li>
</ul>
</div>

</div></section>

<section id="parallella" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#parallella"><h2 id="parallella-introduction">Parallella Introduction</h2>
<p><img src="../images/parallella_front.jpg" alt="" width="700"></p>
</div>

</div></section>

<section id="parallella-specs" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#parallella-specs"><h2 id="parallella-specs-parallella-org-">Parallella Specs (parallella.org)</h2>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Performance</td>
<td style="text-align:center">~30 GFLOPS   </td>
</tr>
<tr>
<td>Memory</td>
<td style="text-align:center">1GB DDR3  </td>
</tr>
<tr>
<td>IO</td>
<td style="text-align:center">~25 Gb/s (48 GPIO)     </td>
</tr>
<tr>
<td>Size</td>
<td style="text-align:center">credit-card    </td>
</tr>
<tr>
<td>Weight</td>
<td style="text-align:center">38g        </td>
</tr>
<tr>
<td>Power</td>
<td style="text-align:center">&lt;5W</td>
</tr>
<tr>
<td>Cost</td>
<td style="text-align:center">$99 -&gt; $249</td>
</tr>
</tbody>
</table>
</div>

</div></section>

<section id="parallella-io" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#parallella-io"><h2 id="parallella-io">Parallella IO</h2>
<p><img src="../images/parallella_back.jpg" alt="" align="right" width="450"></p>
<ul>
<li>0.5mm Samtec connectors </li>
<li>48-pin/24Gbps FPGA link</li>
<li>2 Epiphany links (20Gbps)</li>
<li>JTAG, UART, I2C, SPDIF</li>
<li>LVDS/CMOS  </li>
<li>Adjustable I/O voltage    </li>
</ul>
</div>

</div></section>

<section id="porcupine" class="slide background-image"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#porcupine"><h2 id="porcupine-breakout-board">Porcupine Breakout Board</h2>
<ul>
<li>&quot;Hackable&quot;, easy access 0.1&quot; headers  </li>
<li>Raspberry Pi camera connector  </li>
<li>PMOD, JTAG, elink connectors  </li>
</ul>
</div>
<img src="../images/porcupine.jpg" alt="" full="1">
</div></section>

<section id="parallella-sdr" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#parallella-sdr"><h2 id="parallella-sdr-platform">Parallella SDR Platform</h2>
<p><img src="../images/parallella_sdr.jpg" alt="" align="right" width="500"></p>
<ul>
<li>70MHz - 6GHz </li>
<li><a href="http://wiki.analog.com/resources/eval/user-guides/ad-fmcomms3-ebz">ADI FCOMMS* board (FMC)</a></li>
<li>Parallella carrier  </li>
<li>FMC adapter board    </li>
<li>100% Open source SW    </li>
</ul>
</div>

</div></section>

<section id="ad9361" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#ad9361"><h2 id="ad9361-overview">AD9361 Overview</h2>
<p><img src="../images/fcomms2.jpg" alt="" align="right" width="500"></p>
<ul>
<li>RF 2 Ã— 2 transceiver  </li>
<li>12-bit DACs and ADCs  </li>
<li>70 MHz to 6.0 GHz  </li>
<li>TDD/FDD support  </li>
<li>BW: &lt;200 kHz to  56 MHz  </li>
<li>Noise figure &lt; 2.5 dB  </li>
<li>Independent AGC  </li>
</ul>
</div>

</div></section>

<section id="parallella-sdr-arch" class="slide background-image"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#parallella-sdr-arch"><h2 id="sdr-architecture">SDR Architecture</h2>
<p>(RF + FPGA + CPU + DSP)    </p>
</div>
<img src="../images/ad9361_sdr.jpg" alt="" full="1">
</div></section>

<section id="zynq" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#zynq"><h2 id="xilinx-zynq-soc-architecture">Xilinx Zynq SoC Architecture</h2>
<p><img src="../images/zynq.jpg" alt="" align="right" height="450"></p>
<ul>
<li><strong>ARM SOC:</strong><br>-Dual A9 CPUs (up to 1GHz)<br>-GigE,USB,UART,I2C, ...<br>-Flash &amp; DDR3 controller  </li>
<li><strong>Programmable Logic:</strong><br>-I/O:  (86 --&gt; 470)<br>-LUTS: (17 --&gt; 277K)<br>-BRAM: (0.24MB --&gt; 3MB)    </li>
</ul>
</div>

</div></section>

<section id="epiphany" class="slide background-image"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#epiphany"><h2 id="the-epiphany-architecture">The Epiphany Architecture</h2>
<ul>
<li>2D array of RISC cores (MIMD)  </li>
<li>Mesh Network-On-Chip</li>
<li>Point to point, scalable to &quot;infinity&quot;</li>
<li>ANSI-C, MPI, OpenMP, OpenCL</li>
<li>50 GFLOPS/W in 28nm    </li>
</ul>
</div>
<img src="../images/epiphany.jpg" alt="" full="1">
</div></section>

<section id="chip" class="slide background-image"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#chip"><h2 id="epiphany-chip-features">Epiphany Chip Features</h2>
<ul>
<li>16 x 1GHz RISC processors (65nm)  </li>
<li>32 bit IEEE floating point  </li>
<li>512KB on-chip SRAM  </li>
<li>North, East, West, South IO links </li>
<li>32 GFLOPS peak performance  </li>
<li>512 GB/s local memory BW</li>
<li>128 GB/s NOC bandwidth  </li>
<li>8 GB/s IO bandwidth</li>
</ul>
</div>
<img src="../images/epiphanyIII.jpg" alt="" full="1">
</div></section>

<section id="cpu" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#cpu"><h2 id="epiphany-risc-dsp">Epiphany RISC DSP</h2>
<ul>
<li>32 bit, dual issue in order, 5/8 stage pipeline  </li>
<li>16/32 bit instruction set  </li>
<li>64 general purpose registers  </li>
<li>IEEE754 floating point (FMADD,FMUL,..)  </li>
<li>Nested interrupts, 2-Channel DMA, debug unit</li>
<li><a href="http://adapteva.com/docs/epiphany_arch_refcard.pdf">ISA</a>:  B, BL, JR, JAL, LDR, STR, TESTSET, ADD, SUB, ASR, LSR, LSL, ORR, AND, EOR, BITR, FADD, FSUB, FMUL, FMADD, FMSUB, FABS, FIX, FLOAT, MOV, MOVT, MOVFS, NOP, IDLE, RTS, RTI, GID, BKPT, TRAP, WAND, SYNC </li>
</ul>
</div>

</div></section>

<section id="memory" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#memory"><h2 id="epiphany-memory-system">Epiphany Memory System</h2>
<ul>
<li>32 bit addressing</li>
<li>Shared flat address space, no HW caches!  </li>
<li>Upper 12 bits specify coordinates in 2D map (64 x 64 mesh)   </li>
<li>32KB SRAM per core in E16G301. Accessible by all cores.</li>
<li>4 independent 64 bit local memory transactions per cycle  </li>
<li>Fetch, load, DMA, emesh supports 32 byte access per cycle</li>
<li>Strict local memory ordering, VERY relaxed remote odering.   </li>
</ul>
</div>

</div></section>

<section id="emesh" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#emesh"><h2 id="epiphany-network-on-chip">Epiphany Network-On-Chip</h2>
<ul>
<li>3 meshes: on-chip writes, read requests, off-chip writes  </li>
<li>104 bit atomic single cycle packets  </li>
<li>Non-blocking round robin routing  </li>
<li>x/y static routing  </li>
<li>8 bytes transfered per cycle (on chop write mesh)  </li>
<li>1.5 clock cycle latency / hop  </li>
<li>Extends off chip to I/O (elinks)  </li>
</ul>
</div>

</div></section>

<section id="sdr-sw" class="slide shout"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#sdr-sw"><h2 id="parallella-sdr-software">Parallella SDR Software</h2>
</div>

</div></section>

<section id="sdr-software" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#sdr-software"><h2 id="free-software-resources">Free Software Resources</h2>
<ul>
<li><a href="http://gnuradio.org/redmine/projects/gnuradio/wiki">GNURadio</a>:  Open source SDR platform     </li>
<li><a href="https://github.com/adapteva/epiphany-sdk">Epiphany SDK</a>: Epiphany compiler, debugger  </li>
<li><a href="http://www.xilinx.com/products/design-tools/vivado.html">Vivado</a>: FPGA synthesis tools    </li>
<li><a href="http://www.browndeertechnology.com/coprthr.htm">COPRTHR</a>: OpenCL, MPI, Threads</li>
<li><a href="http://www.browndeertechnology.com/coprthr.htm">OpenMP</a>: OpenMP 4.0 device</li>
<li><a href="https://github.com/parallella/pal">PAL</a>: Optimized open source math/dsp library  </li>
</ul>
</div>

</div></section>

<section id="sd-card" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#sd-card"><h2 id="creating-a-parallella-sd-card">Creating a Parallella SD card</h2>
<ul>
<li><a href="http://www.parallella.org/create-sdcard">Download image</a></li>
<li>Insert SD card in laptop  <pre><code class="lang-sh">    $ gunzip -d &lt;releasename&gt;.img.gz  
$ df -h  
$ umount &lt;sd-partition-path&gt;  
$ sudo dd bs=4M if=&lt;release-name&gt;.img of=&lt;sd-device-path&gt;  
$ sync
</code></pre>
</li>
<li>Remove SD card and insert into Parallella  </li>
</ul>
</div>

</div></section>

<section id="vivado-install" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#vivado-install"><h2 id="install-vivado">Install Vivado</h2>
<ul>
<li><a href="http://www.xilinx.com/support/download.html">Download Vivado from Xilinx</a> (Choose the web installer)  </li>
</ul>
<pre><code class="lang-sh">$ sudo unlink /bin/sh 
$ ln -s /bin/bash /bin/sh
$ chmod u+x ./Xilinx_Vivado_SDK_2015.2_0626_1_Lin64.bin 
$ ./Xilinx_Vivado_SDK_2015.2_0626_1_Lin64.bin 
$ source 2015.2/settings64.csh
</code></pre>
</div>

</div></section>

<section id="gnu-dependancies" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#gnu-dependancies"><h2 id="install-gnuradio-dependancies">Install GNURadio Dependancies</h2>
<pre><code class="lang-sh">$ sudo apt-get -y install git-core cmake g++ python-dev swig \
pkg-config libfftw3-dev libboost1.55-all-dev libcppunit-dev \
libgsl0-dev libusb-dev  python-wxgtk2.8 \
python-numpy python-cheetah python-lxml doxygen libxi-dev \
python-sip libqwt-dev libfontconfig1-dev \
libxrender-dev python-sip python-sip-dev
</code></pre>
</div>

</div></section>

<section id="download" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#download"><h2 id="download-gnu-radio-from-adi-">Download GNU Radio (from ADI)</h2>
<pre><code class="lang-sh">$ sudo dd if=/dev/zero bs=1MiB of=/home/&lt;user&gt;/swap.img
$ sudo mkswap /home/&lt;user&gt;/swap.img
$ sudo swapon /home/&lt;user&gt;/swap.img
$ git clone https://github.com/analogdevicesinc/gnuradio.git
$ git clone https://github.com/analogdevicesinc/libiio.git
$ cd gnuradio
$ git checkout master
</code></pre>
</div>

</div></section>

<section id="building" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#building"><h2 id="building-software">Building software</h2>
<pre><code class="lang-sh">$ mkdir gnuradio/build; cd gnuradio/buid
$ cmake -DENABLE_DOXYGEN:bool=false ..
$ make -j2
$ sudo make install
$ sudo make -C gr-iio install
$ sudo ldconfig
$ cd ~/libiio
$ cmake ./
$ make all
$ sudo make install
</code></pre>
</div>

</div></section>

<section id="shortcut" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#shortcut"><h2 id="shortcut-b-c-life-is-too-short">Shortcut...b/c life is too short</h2>
<p><a href="ftp://ftp.parallella.org//ubuntu/dists/trusty/image/beta/ubuntu-14.04-headless-fmcomms-z7020-20150428.img.gz">PARALLELLA SDR IMAGE</a>  </p>
</div>

</div></section>

<section id="fragment-30" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#fragment-30"><h2 id="references">REFERENCES</h2>
<p><a href="http://wiki.analog.com/resources/eval/user-guides/ad-fmcomms3-ebz">FMCOMMS3 User Guide (ADI)</a><br><a href="http://wiki.analog.com/resources/tools-software/linux-software/gnuradio">GNURadio Installation (ADI)</a><br><a href="http://wiki.analog.com/resources/tools-software/linux-software/iio_oscilloscope">IIO-scope User Guide (ADI)</a><br><a href="http://wiki.analog.com/resources/tools-software/linux-software/zynq_images#preparing_the_image">SD-CARD WIKI (ADI)</a><br><a href="https://archive.fosdem.org/2015/schedule/event/iiosdr/attachments/slides/708/export/events/attachments/iiosdr/slides/708/fosdem_2015_iio_sdr.pdf">ADI at FOSDEM</a>  </p>
</div>

</div></section>

<section id="sdr-demo" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#sdr-demo"><h2 id="sdr-demo">SDR demo</h2>
<ul>
<li>FCOMMS2 + Adapter board + Parallella</li>
<li>ARM + FPGA</li>
<li>ADI Oscilloscope application</li>
<li>...</li>
</ul>
</div>

</div></section>

<section id="epiphany-fft" class="slide"><div>
<div data-render-html="/2015-hotchip/parallella-sdr#epiphany-fft"><h2 id="epiphany-demo">Epiphany demo</h2>
<p>Single core FFT prepared by Sylvain Munaut (SDR guru)
<a href="https://github.com/parallella/parallella-examples/tree/master/vfft/src">Source code</a>  </p>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Results</th>
</tr>
</thead>
<tbody>
<tr>
<td>fftw (ARM A9)</td>
<td>221.977509 Mflops</td>
</tr>
<tr>
<td>fftw (A9-Neon)</td>
<td>409.619659 Mflops</td>
</tr>
<tr>
<td>epiphany C</td>
<td>170.642029 Mflops</td>
</tr>
<tr>
<td>epiphany ASM</td>
<td>668.507629 Mflops</td>
</tr>
</tbody>
</table>
</div>

</div></section>


<div class="progress"><div></div></div>
</div>

</div>
</div>

<script>window.pubRef = {"href":"/2015-hotchip/parallella-sdr","relPath":".."};</script>
<script src="../js/jquery-1.11.3.min.js"></script>
<script src="../shower/shower.min.js"></script>
<script src="../js/highlight-0.2.3.min.js"></script>
<script src="../js/pub-pkg-highlight-0.2.3.js"></script>
<script src="../server/pub-ux.js"></script>
<!-- photoCredit -->
<!-- copyright -->
</body>
</html>
